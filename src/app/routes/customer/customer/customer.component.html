
<div class="modal fade" bsModal #customerModal="bs-modal" [config]="{backdrop: static}" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">     
    <div class="modal-dialog modal-xl">      
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" aria-label="Close" (click)="customerModal.hide()">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">Customer Registration</h4>
            </div>
            <div class="modal-body" >
                <form [formGroup]="valForm"  (submit)="submitCustomerForm($event, valForm.value)" novalidate="">
                <div class="row">
                    <div class="form-group col-md-3">
                        <label>Bid Num</label>
                        <input class="form-control" formControlName="bidnum"  [formControl]="valForm.controls['bidnum']" />
                        <span class=" text-danger" *ngIf="valForm.controls['bidnum'].hasError('range') && (valForm.controls['bidnum'].dirty || valForm.controls['bidnum'].touched)">Please enter a numbe between 100 and 999</span>
                    </div>
                    <div class="form-group col-md-3" [hidden]="!isShipAuction" >
                        <label>Cabin</label>
                        <input class="form-control" type="text" formControlName="cabin"  [formControl]="valForm.controls['cabin']"/>
                        <span class=" text-danger" *ngIf="valForm.controls['cabin'].hasError('InvalidValue') && (valForm.controls['cabin'].dirty || valForm.controls['cabin'].touched)">Please enter Cabin</span>
                    </div>
                    <div class="form-group col-md-3" [hidden]="!isShipAuction">
                        <label>Folio</label>
                        <input class="form-control" type="text" formControlName="folio"  [formControl]="valForm.controls['folio']"/>
                        <span class=" text-danger" *ngIf="valForm.controls['folio'].hasError('InvalidValue') && (valForm.controls['folio'].dirty || valForm.controls['folio'].touched)">Please enter Cabin</span>
                    </div>
                    <div class="form-group col-md-3">
                        <label>Session</label>
                        <div style="display: inline-flex">
                            <input class="form-control" type="text"  formControlName="sessionnum"  [formControl]="valForm.controls['sessionnum']" style="width:50%"/>
                             <input class="form-control" type="text"  formControlName="biddate"  [formControl]="valForm.controls['biddate']" style="width:50%"/>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                     <div class="form-group  col-md-2">
                         <label>Salutation</label>
                          <!--<input class="form-control" type="text" name="salutation" />-->
                        <select class="form-control"  formControlName="prefix"  [formControl]="valForm.controls['prefix']">   <!--   (change)="sortLots()"-->
                               <option *ngFor="let item of prefixCodes; let i = index">{{item.Code}}</option>
                        </select>
                    </div>
                    
                    <div class="form-group  col-md-5">
                        <label>First Name*</label>
                        <input class="form-control" type="text"  formControlName="firstname"  [formControl]="valForm.controls['firstname']" />
                        <span class="text-danger" *ngIf="(valForm.controls['firstname'].hasError('rangeLength') || valForm.controls['firstname'].hasError('required'))&& (valForm.controls['firstname'].dirty || valForm.controls['firstname'].touched)">Plese enter a valid Name</span>
                    </div>
                        <div class="form-group col-md-5">
                        <label>Last Name*</label>
                        <input class="form-control" type="text"  formControlName="lastname"  [formControl]="valForm.controls['lastname']" />
                        <span class="text-danger" *ngIf="(valForm.controls['lastname'].hasError('rangeLength') || valForm.controls['lastname'].hasError('required')) && (valForm.controls['lastname'].dirty || valForm.controls['lastname'].touched)">Plese enter a valid Lastname</span>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-3">
                        <div class="form-group">
                            <label>Address1</label>
                            <input class="form-control" type="text"   formControlName="addressline1"  [formControl]="valForm.controls['addressline1']"/>
                            <span class=" text-danger" *ngIf="valForm.controls['addressline1'].hasError('InvalidValue') && (valForm.controls['addressline1'].dirty || valForm.controls['addressline1'].touched)">Please enter a valid address</span>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="form-group">
                             <label>Address2</label>
                            <input class="form-control" type="text"   formControlName="addressline2"  [formControl]="valForm.controls['addressline2']"/>
                            <span class=" text-danger" *ngIf="valForm.controls['addressline2'].hasError('maxLength') && (valForm.controls['addressline2'].dirty || valForm.controls['addressline2'].touched)">Please enter a valid address line 2</span>
                        </div>
                    </div>
                    <div class="form-group col-md-3">
                        <label>City*</label>
                        <input class="form-control" type="text"  formControlName="city"  [formControl]="valForm.controls['city']" />
                        <span class=" text-danger" *ngIf="valForm.controls['city'].hasError('InvalidValue') && (valForm.controls['city'].dirty || valForm.controls['city'].touched)">Please enter a valid city</span>
                    </div>
                    <div class="form-group col-md-3">
                        <label>State*</label>
                         <select class="form-control"  formControlName="state"  [formControl]="valForm.controls['state']">
                               <option *ngFor="let item of states; let i = index" [value]="item.StateID" >{{item.StateCodeAndName}}</option> <!--[selected] = "item.StateID == user.StateID" -->
                        </select>
                        <span class=" text-danger" *ngIf="valForm.controls['state'].hasError('InvalidValue') && (valForm.controls['state'].dirty || valForm.controls['state'].touched)">Please enter a valid state</span>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-3">
                        <label>Zip/Postal Code*</label>
                        <input class="form-control" type="text"  formControlName="zipcode"  [formControl]="valForm.controls['zipcode']"  (blur)="lookupCityStateCounty()" />   
                        <span class=" text-danger" *ngIf="valForm.controls['zipcode'].hasError('InvalidValue') && (valForm.controls['zipcode'].dirty || valForm.controls['zipcode'].touched)">Please enter a valid zipcode</span>                           
                    </div>
                    <div class="form-group col-md-3">
                        <label>County</label>
                        <input class="form-control" type="text" formControlName="county" [formControl]="valForm.controls['county']" />
                        <span class=" text-danger" *ngIf="valForm.controls['county'].hasError('InvalidValue') && (valForm.controls['county'].dirty || valForm.controls['county'].touched)">Please enter a valid county</span>
                    </div>
                    <div class="form-group col-md-3">
                        <label>Country*</label>
                       <select class="form-control"  formControlName="countryid"  [formControl]="valForm.controls['countryid']"  (change)="countryChanged()">   
                               <option *ngFor="let item of countries; let i = index"  [value]="item.CountryID" [selected] = "item.CountryID ==valForm.controls['countryid'].value">{{item.Name}}</option>
                        </select>
                        <span class=" text-danger" *ngIf="valForm.controls['countryid'].hasError('InvalidValue') && (valForm.controls['countryid'].dirty || valForm.controls['countryid'].touched)">Please enter a valid city</span>
                    </div>
                      <div class="form-group col-md-3">
                        <label>Region*</label>
                        <select class="form-control" formControlName="regionid" [formControl]="valForm.controls['regionid']" placeholder="">  
                               <option *ngFor="let item of regions; let i = index"  [value]="item.RegionID" >{{item.Name}}</option>
                        </select>
                        <span class=" text-danger" *ngIf="valForm.controls['regionid'].hasError('InvalidValue') && (valForm.controls['regionid'].dirty || valForm.controls['regionid'].touched)">Please enter a valid region</span>
                    </div>
                    
                </div>
                <div class="row">
                     
                </div>
                 <div class="row">
                     <div class="form-group col-md-2">
                        <label>Country Code</label>
                        <input class="form-control" type="text"  formControlName="countrycode"  [formControl]="valForm.controls['countrycode']" />
                        <span class=" text-danger" *ngIf="valForm.controls['countrycode'].hasError('rangeLength') && (valForm.controls['countrycode'].dirty || valForm.controls['countrycode'].touched)">Please enter a valid country code</span>
                    </div>
                    <div class="form-group col-md-5">
                        <label>Home Phone*</label>
                        <input class="form-control" type="text" formControlName="homephone"  [formControl]="valForm.controls['homephone']"  />
                        <span class=" text-danger" *ngIf="!valForm.controls['homephone'].valid && (valForm.controls['homephone'].dirty || valForm.controls['homephone'].touched)">Please enter a valid homephone</span>
                    </div>
                      <div class="form-group col-md-5">
                        <label>Mobile Phone</label>
                        <input class="form-control" type="text"  formControlName="cellphone" [formControl]="valForm.controls['cellphone']"  />
                        <span class=" text-danger" *ngIf="valForm.controls['cellphone'].hasError('rangeLength') && (valForm.controls['cellphone'].dirty || valForm.controls['cellphone'].touched)">Please enter a valid cellphone</span>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-4">
                        <label>Marketing Lead</label>
                         <select class="form-control"   formControlName="leadcode" [formControl]="valForm.controls['leadcode']" > 
                               <option *ngFor="let item of leads; let i = index"  [selected] = "item.Name == user.LeadCode">{{item.Code}}</option>
                        </select>
                    </div>
                    <div class="form-group col-md-4">
                        <label>Email Address*</label>
                        <input class="form-control" type="text"  formControlName="email"  [formControl]="valForm.controls['email']"  />
                        <span class=" text-danger" *ngIf="valForm.controls['email'].hasError('email') && (valForm.controls['email'].dirty || valForm.controls['email'].touched)">Please enter a valid email</span>
                    </div>
                    <div class="form-group col-md-4">
                        <label>Company</label>
                        <input class="form-control" type="text"  formControlName="company"  [formControl]="valForm.controls['company']"  />
                        <span class=" text-danger" *ngIf="valForm.controls['company'].hasError('InvalidValue') && (valForm.controls['company'].dirty || valForm.controls['company'].touched)">Please enter a valid company</span>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-3">
                        <label>Historical Customer Number </label>
                        <input class="form-control" type="text" formControlName="historicalcustomer" [formControl]="valForm.controls['historicalcustomer']" readonly/>
                        <label class="checkbox-inline c-checkbox">
                            <input id="newHistoticalCustCheckbox" type="checkbox" [(ngModel)]="isNewHistCustomer"  [ngModelOptions]="{standalone: true}" (change)="newHistCustChanged()"/><span class="fa fa-check"></span>Choose New Historical Customer
                        </label>
                        <span class=" text-danger" *ngIf="valForm.controls['historicalcustomer'].hasError('rangeLength') && (valForm.controls['historicalcustomer'].dirty || valForm.controls['historicalcustomer'].touched)">Please enter a valid city</span>
                    </div>                   
                      <div class="form-group col-md-2" [hidden]="isShipAuction">
                        <label>Tax ID</label>
                        <input class="form-control" type="text"  formControlName="taxid"  [formControl]="valForm.controls['taxid']"  />
                        <span class=" text-danger" *ngIf="valForm.controls['taxid'].hasError('InvalidValue') && (valForm.controls['taxid'].dirty || valForm.controls['taxid'].touched)">Please enter a valid Tax ID</span>
                    </div>
                     <div class="form-group  col-md-2"  [hidden]="isShipAuction">
                        <label>CC Type</label>
                        <select class="form-control" formControlName="paymenttype"  [formControl]="valForm.controls['paymenttype']" (change)="paymentTypeChanged()">   <!--   (change)="sortLots()"-->
                            <option value=''>None</option>
                            <option *ngFor="let item of paymentTypes; let i = index" value={{item.Code}}>{{item.Description}}</option>
                        </select>
                    </div>
                      <div class="form-group col-md-3" [hidden]="isShipAuction">
                        <label>CC Number</label>
                        <input class="form-control" type="text"  formControlName="ccnumber"  [formControl]="valForm.controls['ccnumber']"  />
                        <span class=" text-danger" *ngIf="valForm.controls['ccnumber'].hasError('creditCard') && (valForm.controls['ccnumber'].dirty || valForm.controls['ccnumber'].touched)">Please enter a valid Card Number</span>
                    </div>
                     <div class="form-group col-md-2" [hidden]="isShipAuction">
                        <label>CC Expire</label>
                        <div style="width:100%">
                            <div style="width:49%;float:left;">
                                <select class="form-control"  formControlName="ccexpiremonth" [formControl]="valForm.controls['ccexpiremonth']" placeholder="Month">  
                                    <option value=''>Month</option>
                                    <option *ngFor="let item of ccMonths; let i = index"  [value]="item.value" >{{item.label}}</option>
                                </select>
                                <span class=" text-danger" *ngIf="valForm.controls['ccexpiremonth'].hasError('InvalidValue')  && (valForm.controls['ccexpiremonth'].dirty || valForm.controls['ccexpiremonth'].touched)">Invalid Month</span>
                            </div>
                            <div style="width:51%;float:left">
                                <select class="form-control" formControlName="ccexpireyear" [formControl]="valForm.controls['ccexpireyear']" placeholder="Year">  
                                    <option value=''>Year</option>
                                    <option *ngFor="let item of ccYears; let i = index"  [value]="item" >{{item}}</option>
                                </select>
                                 <span class=" text-danger" *ngIf="valForm.controls['ccexpireyear'].hasError('InvalidValue') && (valForm.controls['ccexpireyear'].dirty || valForm.controls['ccexpireyear'].touched)">Invalid Year</span>
                            </div>
                         </div>
                     </div>
                     <div class="form-group col-md-3" [hidden]="!isShipAuction">
                        <label>PWGCC Open to Buy</label>
                        <input class="form-control" type="text"    formControlName="pwgccopentobuy" [formControl]="valForm.controls['pwgccopentobuy']" />
                        <label class="checkbox-inline c-checkbox">
                            <input id="calledForCCIncCheckbox" type="checkbox" /><span class="fa fa-check"></span>Called for credit line increase?
                        </label>
                        <span class=" text-danger" *ngIf="valForm.controls['pwgccopentobuy'].hasError('rangeLength') && (valForm.controls['pwgccopentobuy'].dirty || valForm.controls['pwgccopentobuy'].touched)">Please enter credit increase</span>
                    </div>
                </div>
                <br/>
                <div class="row">
                     <div class="col-md-6">
                        <label class="control-label">Are you currently in out mailing list? &nbsp;&nbsp; </label>
                        <div class="radio-inline c-radio">
                            <label>
                                <input id="chk-mailinglist" type="radio" formControlName="mailinglist" [formControl]="valForm.controls['mailinglist']"  [value]="true" />
                                <span class="fa fa-check"></span>Yes</label>
                        </div>
                        <div class="radio-inline c-radio">
                            <label>
                                <input id="chk-mailinglist" type="radio" formControlName="mailinglist" [formControl]="valForm.controls['mailinglist']" [value]="false"  />
                                <span class="fa fa-check"></span>No</label>
                        </div>
                        <br/>
                        <div [hidden]="!inMailingList">
                            <small style="padding-top: 8px;" class="pull-left">Have you changed your address in the last 24 months? What was your last </small>
                            <input class="form-control pull-left" type="text" placeholder="Zip Code" style="width:100px;"  formControlName="lastzipcode" [formControl]="valForm.controls['lastzipcode']" />
                            <span class=" text-danger" *ngIf="valForm.controls['lastzipcode'].hasError('rangeLength') && (valForm.controls['lastzipcode'].dirty || valForm.controls['lastzipcode'].touched)">Please enter a valid zip code</span>
                        </div>
                    </div>
                      <div class="col-md-6">
                        <label class="control-label">Is this your primary address? &nbsp;&nbsp; </label>
                        <div class="radio-inline c-radio">
                            <label>
                                <input id="chk-primaryaddress" type="radio" formControlName="primaryaddress" [formControl]="valForm.controls['primaryaddress']" [value]="true" />  
                                <span class="fa fa-check"></span>Yes</label>
                        </div>
                        <div class="radio-inline c-radio">
                            <label>
                                <input id="chk-primaryaddress" type="radio" formControlName="primaryaddress" [formControl]="valForm.controls['primaryaddress']" [value]="false" />
                                <span class="fa fa-check"></span>No</label>
                        </div>
                    </div>
                </div>
                <div class="mv"></div>
                <div class="pt clearfix">
                    <p class="pull-left text-sm"><i>Fields marked with (*) are required</i></p>
                    <div class="pull-right">
                        <button class="btn btn-danger" type="button" (click)="customerModal.hide()">Cancel</button>
                        <button style="margin-left:10px" class="btn btn-primary" type="submit">Save </button>
                    </div>
                </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div bsModal #cityStateCountyModal="bs-modal" [config]="{backdrop: false}" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" style="margin-top:200px;" >
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <button  type="button" class="close" aria-label="Close" (click)="cityStateCountyModal.hide();cityStateCountyList = []">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">Select City</h4>
            </div>
            <div class="modal-body">
               <table class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Postal Code</th>
                            <th>City</th>
                            <th>State</th>
                            <th>County</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let item of cityStateCountyList; let i = index">
                            <td>{{item.PostalCode}}</td>
                            <td>{{item.City}}</td>
                            <td>{{item.State.Code}}</td>
                            <td>{{item.County}}</td>
                            <td class="text-center"><button class="btn btn-sm btn-primary" (click)="selectCityStateCounty(item)"> Select </button></td>
                        </tr>
                    </tbody>
                </table>

            </div>
        </div>
    </div>
</div>

<div bsModal #histCustomerModal="bs-modal" [config]="{backdrop: false,ignoreBackdropClick:true}"  class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" style="margin-top:200px;" >
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <!--<button  type="button" class="close" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>-->
                <h4 class="modal-title">Check For Existing Account</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <p>If the customer is any of the following, Plese select it.</p>
                        <table class="table table-striped table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th>Customer #</th>
                                    <th>First Name</th>
                                    <th>Last Name</th>
                                    <th>Home Phone(last 6)</th>
                                    <th>Last Purchased</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let item of historicalCustomers; let i = index">
                                    <td>{{item.CustNum}}</td>
                                    <td>{{item.FirstName}}</td>
                                    <td>{{item.LastName}}</td>
                                    <td>{{item.HomePhone}}</td>
                                    <td>{{item.LastPurchaseDate}}</td>
                                    <td class="text-center"><button class="btn btn-sm btn-primary" (click)="selectHistCustomer(item)"> Select </button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="mv"></div>
                <div class="pt clearfix">
                   <div class="pull-right">
                        <button class="btn btn-danger" type="button"  (click)="selectHistCustomer(null);historicalCustomers = []">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div bsModal #confirmCustomerModal="bs-modal" [config]="{backdrop: false,ignoreBackdropClick:true}"  class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" style="margin-top:200px;" >
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <!--<button  type="button" class="close" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>-->
                <h4 class="modal-title">Confirm Customer Account</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                     <div class="col-md-12">
                        <label class="control-label">Is this a new customer? &nbsp;&nbsp; </label>
                        <div class="radio-inline c-radio">
                            <label>
                                <input name="chk-custIsNew" type="radio" [(ngModel)]="histCustConfig.isNew" [value]="true" />  
                                <span class="fa fa-check"></span>Yes</label>
                        </div>
                        <div class="radio-inline c-radio">
                            <label>
                                <input name="chk-custIsNew" type="radio" [(ngModel)]="histCustConfig.isNew" [value]="false" />
                                <span class="fa fa-check"></span>No</label>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <label class="control-label">Do you have an existing account with Park West Gallery? &nbsp;&nbsp; </label>
                            <div class="radio-inline c-radio">
                                <label>
                                    <input name="chk-custHasAccount" type="radio" [(ngModel)]="histCustConfig.hasAccount" [value]="true" />  
                                    <span class="fa fa-check"></span>Yes</label>
                            </div>
                            <div class="radio-inline c-radio">
                                <label>
                                    <input name="chk-custHasAccount" type="radio" [(ngModel)]="histCustConfig.hasAccount" [value]="false" />
                                    <span class="fa fa-check"></span>No</label>
                            </div>
                    </div>
                    <div class="col-md-12" [hidden]="!histCustConfig.hasAccount">
                        <label class="control-label">Is the Address you are using your mailing address? &nbsp;&nbsp; </label>
                        <div class="radio-inline c-radio">
                            <label>
                                <input name="chk-custIsMailing" type="radio" [(ngModel)]="histCustConfig.isMailing" [value]="true" />  
                                <span class="fa fa-check"></span>Yes</label>
                        </div>
                        <div class="radio-inline c-radio">
                            <label>
                                <input name="chk-custIsMailing" type="radio" [(ngModel)]="histCustConfig.isMailing" [value]="false" />
                                <span class="fa fa-check"></span>No</label>
                        </div>
                    </div>
                </div>
                <div class="mv"></div>
                <div class="pt clearfix">
                   <div class="pull-right">
                        <!--<button class="btn btn-danger" type="button"  (click)="confirmCustomerModal.hide();">Cancel</button>-->
                        <button style="margin-left:10px" class="btn btn-primary" [disabled]="!histCustConfig.isNew" (click)="confirmCustomerSaveClick()" > Save </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>